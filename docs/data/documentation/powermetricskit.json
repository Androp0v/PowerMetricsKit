{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit"},"sections":[],"hierarchy":{"paths":[[]]},"abstract":[{"type":"text","text":"A package to retrieve realtime information on CPU energy consumption using the CPU’s Closed Loop Performance Counters (CLPC) via "},{"type":"codeVoice","code":"proc_pidinfo"},{"type":"text","text":"."}],"metadata":{"role":"collection","roleHeading":"Framework","modules":[{"name":"PowerMetricsKit"}],"title":"PowerMetricsKit","externalID":"PowerMetricsKit","symbolKind":"module"},"schemaVersion":{"patch":0,"major":0,"minor":3},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"inlineContent":[{"type":"text","text":"This package uses "},{"type":"codeVoice","code":"libproc"},{"type":"text","text":"‘s "},{"code":"proc_pidinfo","type":"codeVoice"},{"text":" with the ","type":"text"},{"type":"codeVoice","code":"PROC_PIDTHREADCOUNTS"},{"text":" option, which returns a ","type":"text"},{"type":"codeVoice","code":"struct"},{"text":" including per-thread energy measurements from the CPU’s’ CLPC. The list of all threads is retrieved using ","type":"text"},{"type":"codeVoice","code":"task_threads"},{"text":" with the PID of the current task (root privileges are required to invoke ","type":"text"},{"type":"codeVoice","code":"task_threads"},{"text":" on other processes).","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"libproc.h"},{"type":"text","text":" headers can’t be imported on iOS, so they’re reproduced at the beginning of "},{"code":"sample_threads.c","type":"codeVoice"},{"text":", as well as the result ","type":"text"},{"type":"codeVoice","code":"struct"},{"text":"s from the ","type":"text"},{"code":"proc_pidinfo","type":"codeVoice"},{"text":", using the definitions and documentation available in ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/apple-oss-distributions\/xnu\/blob\/aca3beaa3dfbd42498b42c5e5ce20a938e6554e5\/bsd\/sys\/proc_info.h"},{"text":".","type":"text"}],"type":"paragraph"}]}],"kind":"symbol","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/powermetricskit"]}],"topicSections":[{"identifiers":["doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Adding-power-metrics-to-your-app","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Unwinding-the-stack"],"title":"Articles","generated":true},{"identifiers":["doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceGraph","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceInfo","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsActor","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsManager","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampledResultsHistory","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SymbolicateBacktraces"],"title":"Classes"},{"identifiers":["doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Backtrace","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/CombinedPower","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/PowerMetricsConfig","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/PowerWidgetView","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsResult","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SimpleBacktraceInfo","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SymbolicatedInfo","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/ThreadSample"],"title":"Structures"},{"title":"Type Aliases","identifiers":["doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceAddress","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Energy","doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Power"]}],"references":{"doc://PowerMetricsKit/documentation/PowerMetricsKit/ThreadSample":{"navigatorTitle":[{"text":"ThreadSample","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/ThreadSample","title":"ThreadSample","abstract":[{"type":"text","text":"The information retrieved when sampling a thread, including the power used."}],"url":"\/documentation\/powermetricskit\/threadsample","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ThreadSample"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/Power":{"navigatorTitle":[{"text":"Power","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Power","title":"Power","abstract":[{"type":"text","text":"A power measurement, always in watts."}],"url":"\/documentation\/powermetricskit\/power","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Power"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/PowerMetricsConfig":{"navigatorTitle":[{"text":"PowerMetricsConfig","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/PowerMetricsConfig","title":"PowerMetricsConfig","abstract":[{"type":"text","text":"The configuration of the thread sampling."}],"url":"\/documentation\/powermetricskit\/powermetricsconfig","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"PowerMetricsConfig"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/BacktraceInfo":{"navigatorTitle":[{"text":"BacktraceInfo","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceInfo","title":"BacktraceInfo","abstract":[{"type":"text","text":"Full backtrace information."}],"url":"\/documentation\/powermetricskit\/backtraceinfo","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"BacktraceInfo"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SymbolicateBacktraces":{"url":"\/documentation\/powermetricskit\/symbolicatebacktraces","role":"symbol","type":"topic","title":"SymbolicateBacktraces","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SymbolicateBacktraces","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SymbolicateBacktraces","kind":"identifier"}],"kind":"symbol","navigatorTitle":[{"text":"SymbolicateBacktraces","kind":"identifier"}],"abstract":[{"text":"A class to interact to ","type":"text"},{"code":"dladdr","type":"codeVoice"},{"text":" to retrieve information about the sampled backtraces.","type":"text"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/Backtrace":{"navigatorTitle":[{"text":"Backtrace","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Backtrace","title":"Backtrace","abstract":[{"type":"text","text":"The full backtrace and the energy usage associated with it."}],"url":"\/documentation\/powermetricskit\/backtrace","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Backtrace"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/Unwinding-the-stack":{"role":"article","type":"topic","kind":"article","identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Unwinding-the-stack","title":"Deep Dive: Unwinding the stack","abstract":[{"type":"text","text":"Get to know how the code to obtain the backtraces for all the threads in the process works."}],"url":"\/documentation\/powermetricskit\/unwinding-the-stack"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SimpleBacktraceInfo":{"url":"\/documentation\/powermetricskit\/simplebacktraceinfo","abstract":[{"type":"text","text":"Minimal piece of information of a backtrace address."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"SimpleBacktraceInfo"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SimpleBacktraceInfo","kind":"symbol","navigatorTitle":[{"text":"SimpleBacktraceInfo","kind":"identifier"}],"title":"SimpleBacktraceInfo","role":"symbol","type":"topic"},"https://github.com/apple-oss-distributions/xnu/blob/aca3beaa3dfbd42498b42c5e5ce20a938e6554e5/bsd/sys/proc_info.h":{"titleInlineContent":[{"text":"Apple’s OSS Distributions repository for ","type":"text"},{"code":"libproc.h","type":"codeVoice"}],"identifier":"https:\/\/github.com\/apple-oss-distributions\/xnu\/blob\/aca3beaa3dfbd42498b42c5e5ce20a938e6554e5\/bsd\/sys\/proc_info.h","url":"https:\/\/github.com\/apple-oss-distributions\/xnu\/blob\/aca3beaa3dfbd42498b42c5e5ce20a938e6554e5\/bsd\/sys\/proc_info.h","title":"Apple’s OSS Distributions repository for libproc.h","type":"link"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/BacktraceGraph":{"url":"\/documentation\/powermetricskit\/backtracegraph","abstract":[{"text":"A graph containing the recorded backtrace information.","type":"text"}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"BacktraceGraph","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceGraph","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"BacktraceGraph"}],"title":"BacktraceGraph","role":"symbol","type":"topic"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SampledResultsHistory":{"type":"topic","abstract":[{"type":"text","text":"Historic power figures for the app."}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SampledResultsHistory","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampledResultsHistory","kind":"symbol","navigatorTitle":[{"text":"SampledResultsHistory","kind":"identifier"}],"title":"SampledResultsHistory","role":"symbol","url":"\/documentation\/powermetricskit\/sampledresultshistory"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/PowerWidgetView":{"title":"PowerWidgetView","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"PowerWidgetView","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/PowerWidgetView","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"PowerWidgetView"}],"abstract":[{"text":"A ","type":"text"},{"type":"codeVoice","code":"View"},{"type":"text","text":" displaying the power consumption of the app."}],"url":"\/documentation\/powermetricskit\/powerwidgetview","type":"topic","role":"symbol"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/Adding-power-metrics-to-your-app":{"url":"\/documentation\/powermetricskit\/adding-power-metrics-to-your-app","abstract":[{"text":"Measure energy used by your app.","type":"text"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Adding-power-metrics-to-your-app","kind":"article","title":"Adding power metrics to your app","role":"article","type":"topic"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SampleThreadsManager":{"type":"topic","abstract":[{"text":"The main class interfacing with the C code that retrieves the energy data.","type":"text"}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SampleThreadsManager","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsManager","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"SampleThreadsManager"}],"title":"SampleThreadsManager","role":"symbol","url":"\/documentation\/powermetricskit\/samplethreadsmanager"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/BacktraceAddress":{"url":"\/documentation\/powermetricskit\/backtraceaddress","abstract":[{"type":"text","text":"The memory address retrieved when unwinding the stack during a backtrace."}],"fragments":[{"text":"typealias","kind":"keyword"},{"kind":"text","text":" "},{"text":"BacktraceAddress","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/BacktraceAddress","kind":"symbol","navigatorTitle":[{"text":"BacktraceAddress","kind":"identifier"}],"title":"BacktraceAddress","role":"symbol","type":"topic"},"doc://PowerMetricsKit/documentation/PowerMetricsKit":{"title":"PowerMetricsKit","kind":"symbol","role":"collection","type":"topic","abstract":[{"type":"text","text":"A package to retrieve realtime information on CPU energy consumption using the CPU’s Closed Loop Performance Counters (CLPC) via "},{"code":"proc_pidinfo","type":"codeVoice"},{"text":".","type":"text"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit","url":"\/documentation\/powermetricskit"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SymbolicatedInfo":{"type":"topic","abstract":[{"text":"Symbol information of a backtrace, recovered using ","type":"text"},{"type":"codeVoice","code":"dladdr"},{"type":"text","text":"."}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"SymbolicatedInfo","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SymbolicatedInfo","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"SymbolicatedInfo"}],"title":"SymbolicatedInfo","role":"symbol","url":"\/documentation\/powermetricskit\/symbolicatedinfo"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/Energy":{"url":"\/documentation\/powermetricskit\/energy","abstract":[{"text":"An energy measurement, always in watts-hour.","type":"text"}],"fragments":[{"text":"typealias","kind":"keyword"},{"kind":"text","text":" "},{"text":"Energy","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/Energy","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"Energy"}],"title":"Energy","role":"symbol","type":"topic"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/CombinedPower":{"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/CombinedPower","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CombinedPower"}],"url":"\/documentation\/powermetricskit\/combinedpower","title":"CombinedPower","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"CombinedPower","kind":"identifier"}],"kind":"symbol","role":"symbol","abstract":[{"text":"A combined power measurement composed of measurements for different core types.","type":"text"}]},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SampleThreadsResult":{"type":"topic","abstract":[{"type":"text","text":"The processed results from sampling the threads."}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"SampleThreadsResult","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsResult","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"SampleThreadsResult"}],"title":"SampleThreadsResult","role":"symbol","url":"\/documentation\/powermetricskit\/samplethreadsresult"},"doc://PowerMetricsKit/documentation/PowerMetricsKit/SampleThreadsActor":{"url":"\/documentation\/powermetricskit\/samplethreadsactor","abstract":[{"text":"The global actor used to access the ","type":"text"},{"code":"SampleThreadsManager","type":"codeVoice"},{"type":"text","text":" in a thread-safe way."}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SampleThreadsActor","kind":"identifier"}],"identifier":"doc:\/\/PowerMetricsKit\/documentation\/PowerMetricsKit\/SampleThreadsActor","kind":"symbol","navigatorTitle":[{"text":"SampleThreadsActor","kind":"identifier"}],"title":"SampleThreadsActor","role":"symbol","type":"topic"}}}